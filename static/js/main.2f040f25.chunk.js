(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{65:function(e,t,a){e.exports=a(86)},70:function(e,t,a){},72:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),i=a.n(l),c=(a(70),a(26)),s=a.n(c),o=a(32),u=a(33),m=a(11),d=a(34),h=a(19),p=a(50),b=a(51),g=a(57),f=(a(72),a(27)),v=a.n(f);a(73),a(77);v.a.initializeApp({apiKey:"AIzaSyBrPgbxv1stBqx1zRgN2ADj1z-gEHzcC20",authDomain:"blog-app-31a3a.firebaseapp.com",databaseURL:"https://blog-app-31a3a.firebaseio.com",projectId:"blog-app-31a3a",storageBucket:"blog-app-31a3a.appspot.com",messagingSenderId:"272701057774",appId:"1:272701057774:web:906d1fb811b9c9982a61ff",measurementId:"G-WJWQC7ZDJY"});var E=v.a.auth(),w=v.a.firestore(),y=new v.a.auth.GoogleAuthProvider;y.setCustomParameters({prompt:"select_account"});var S=function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n,r,l,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=w.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,l=t.email,i=new Date,e.prev=9,e.next=12,n.set(Object(o.a)({displayName:r,email:l,createdAt:i},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("Error creating user.",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){return E.signInWithPopup(y)},N=(v.a,a(119)),F=function(e){var t=e.user;return r.a.createElement("nav",{className:"flex justify-end bb b--white-10 bg-dark-gray"},r.a.createElement("div",{className:"flex-grow pa3 flex items-center"},r.a.createElement("div",{className:"f6 link dib white dim mr3 mr4-ns pointer"},t?r.a.createElement("div",{onClick:function(){return E.signOut()}},"Sign Out"):r.a.createElement("div",{onClick:k},"Sign In")),t?r.a.createElement("div",{className:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer"},"Hi, ",t.displayName):r.a.createElement(N.a,{arrow:!0,title:r.a.createElement("span",{style:{fontSize:"12px"}},"Create a Google Account"),"aria-label":"signup"},r.a.createElement("a",{className:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer",href:"https://accounts.google.com/signup/v2/webcreateaccount?continue=https%3A%2F%2Faccounts.google.com%2FManageAccount&dsh=S470069364%3A1581635333339519&gmb=exp&biz=false&flowName=GlifWebSignIn&flowEntry=SignUp",target:"_blank",rel:"noopener noreferrer"},"Sign Up"))))},x=a(117),C=a(116),P=function(e){var t=e.handleChange,a=e.handleSubmit,n=e.handleReset,l=e.titleField,i=e.contentField;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement("div",{className:"db mt4"},r.a.createElement(C.a,{id:"title",label:"Enter a Title",onChange:t,type:"title",name:"titleField",value:l,style:{margin:10,minWidth:"50%"},margin:"dense",variant:"outlined"})),r.a.createElement("div",{className:"db"},r.a.createElement(C.a,{id:"content",label:"What's on your mind?",onChange:t,type:"content",name:"contentField",value:i,style:{margin:10,minWidth:"50%"},margin:"normal",variant:"outlined",multiline:!0})),r.a.createElement("div",{className:"pa3 dib"},r.a.createElement(x.a,{variant:"contained",type:"reset",onClick:n,color:"secondary"},"Clear")),r.a.createElement("div",{className:"pa3 dib"},r.a.createElement(x.a,{variant:"contained",type:"submit",onClick:a,color:"primary"},"Post")))},A=function(e){var t=e.title,a=e.content,n=e.author,l=e.date;return r.a.createElement("article",{className:"pv4 bb b--black-10 ph3 ph0-l"},r.a.createElement("div",{className:"flex flex-column flex-row-ns"},r.a.createElement("div",{className:"tl"},r.a.createElement("h1",{className:"f3 athelas mt0 lh-title"},t),r.a.createElement("p",{className:"f5 f4-l lh-copy athelas"},a))),r.a.createElement("p",{className:"tl f6 lh-copy gray mv2"},"By ",r.a.createElement("span",{className:"fw7"},n)),r.a.createElement("time",{className:"tl f6 db gray"},l))},j=a(54),O=a.n(j),U=a(56),W=a.n(U),I=a(55),B=a.n(I),z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).unsubscribeFromAuth=null,a.unsubscribeFromSnapshot=null,a.initialState={currentUser:null,titleField:"",contentField:"",posts:[],currentPage:1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(m.a)({},n,r))},a.handleSubmit=function(){var e=a.state,t=e.titleField,n=e.contentField,r=e.currentUser,l=e.posts;if(t.trim()&&n.trim()){var i={key:O()(),title:t,content:n,author:r.displayName,date:(new Date).toString().split(":").slice(0,2).toString().replace(",",":")};a.handleReset(),w.doc("posts/".concat(1e8-l.length-1)).set(i)}else alert("Title or content cannot be empty!")},a.handleReset=function(){a.setState({titleField:"",contentField:""})},a.handlePageForward=function(){a.setState((function(e){return{currentPage:e.currentPage+1}}))},a.handlePageBackward=function(){a.setState((function(e){return{currentPage:e.currentPage-1}}))},a.state=a.initialState,a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromAuth=E.onAuthStateChanged(function(){var t=Object(u.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,S(a);case 3:t.sent.onSnapshot((function(t){e.setState({currentUser:Object(o.a)({id:t.id},t.data())})})),t.next=8;break;case 7:e.setState({currentUser:null});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var t=w.collection("posts");this.unsubscribeFromSnapshot=t.onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()}));e.setState({posts:a}),e.state.currentPage>1&&e.state.currentPage>Math.ceil(a.length/5)&&e.setState({currentPage:Math.ceil(a.length/5)})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth(),this.unsubscribeFromSnapshot()}},{key:"render",value:function(){var e=this.state,t=e.titleField,a=e.contentField,n=e.currentUser,l=e.posts,i=e.currentPage;return r.a.createElement("div",{className:"App"},r.a.createElement(F,{user:this.state.currentUser}),n?r.a.createElement(P,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleReset:this.handleReset,titleField:t,contentField:a}):null,r.a.createElement("section",{className:"mw7 center"},r.a.createElement("h1",{className:"athelas ph3 ph0-l"},"News Feed"),l.length?r.a.createElement("div",null,l.slice(5*(i-1),5*i).map((function(e){return r.a.createElement(A,e)})),r.a.createElement("div",{className:"ma4"},r.a.createElement(x.a,{onClick:this.handlePageBackward,variant:"contained",disabled:1===i},r.a.createElement(B.a,null)),r.a.createElement("span",{className:"mh3"},"Page ".concat(i," of ").concat(Math.ceil(l.length/5))),r.a.createElement(x.a,{onClick:this.handlePageForward,variant:"contained",disabled:i===Math.ceil(l.length/5)},r.a.createElement(W.a,null)))):r.a.createElement("h2",null,"No posts yet!")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(85);i.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[65,1,2]]]);
//# sourceMappingURL=main.2f040f25.chunk.js.map