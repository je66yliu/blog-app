{"version":3,"sources":["firebase/Firebase.js","components/Header.jsx","components/CreatePost.jsx","components/PostPreview.jsx","App.jsx","serviceWorker.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","provider","GoogleAuthProvider","setCustomParameters","prompt","createNewUser","userAuth","additionalData","a","userRef","doc","uid","get","exists","displayName","email","createdAt","Date","set","console","log","message","signInWithGoogle","signInWithPopup","Header","user","className","onClick","signOut","Tooltip","arrow","title","style","fontSize","aria-label","href","target","rel","CreatePost","handleChange","handleSubmit","handleReset","titleField","contentField","onSubmit","e","preventDefault","TextField","id","label","onChange","type","name","value","margin","minWidth","variant","multiline","Button","color","PostPreview","content","author","date","App","props","unsubscribeFromAuth","unsubscribeFromSnapshot","initialState","currentUser","posts","event","setState","state","trim","newPost","key","uuidv1","toString","split","slice","replace","newArr","concat","length","alert","this","onAuthStateChanged","onSnapshot","snapshot","data","postRef","collection","allPosts","docs","map","post","Component","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6094103f.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_API_KEY,\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\n    projectId: process.env.REACT_APP_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_APP_ID,\n    measurementId: process.env.REACT_APP_MEASUREMENT_ID\n};\n\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n\nconst provider = new firebase.auth.GoogleAuthProvider();\nprovider.setCustomParameters({prompt: 'select_account'});\n\n\nexport const createNewUser = async (userAuth, additionalData) => {\n    if (!userAuth) return;\n\n    const userRef = firestore.doc(`users/${userAuth.uid}`);\n    const snapShot = await userRef.get();\n\n    if (!snapShot.exists) {\n        const { displayName, email } = userAuth;\n        const createdAt = new Date();\n\n        try {\n            await userRef.set({\n                displayName,\n                email,\n                createdAt,\n                ...additionalData\n            });\n        } catch (err) {\n            console.log('Error creating user.', err.message);\n        }\n    }\n\n    return userRef;\n};\n\nexport const signInWithGoogle = () => auth.signInWithPopup(provider);\n\nexport default firebase;","import React from 'react';\nimport { auth } from '../firebase/Firebase';\nimport { signInWithGoogle } from '../firebase/Firebase';\n\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst Header = ({ user }) => (\n    <nav className=\"flex justify-end bb b--white-10 bg-dark-gray\">\n        <div className=\"flex-grow pa3 flex items-center\">\n            <div className=\"f6 link dib white dim mr3 mr4-ns pointer\">\n                {\n                    user ?\n                    <div onClick={() => auth.signOut()}>Sign Out</div>\n                    : <div onClick={signInWithGoogle}>Sign In</div>\n                }\n            </div>\n\n            {\n                user ? <div className=\"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer\">Hi, {user.displayName}</div>\n                :   <Tooltip arrow title={<span style={{ fontSize: '12px' }}>Create a Google Account</span>} aria-label=\"signup\">\n                        <a className=\"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer\" href=\"https://accounts.google.com/signup/v2/webcreateaccount?continue=https%3A%2F%2Faccounts.google.com%2FManageAccount&dsh=S470069364%3A1581635333339519&gmb=exp&biz=false&flowName=GlifWebSignIn&flowEntry=SignUp\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            Sign Up\n                        </a>\n                    </Tooltip>\n            }\n\n        </div>\n    </nav>\n);\n\nexport default Header;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\n\nconst CreatePost = ({ handleChange, handleSubmit, handleReset, titleField, contentField }) => (\n    <form onSubmit={e => { e.preventDefault() }}>\n        <div className='db mt4'>\n            <TextField\n                id=\"title\"\n                label=\"Enter a Title\"\n                onChange={handleChange}\n                type=\"title\"\n                name=\"titleField\"\n                value={titleField}\n                style={{\n                    margin: 10,\n                    minWidth: '50%'\n                }}\n                margin=\"dense\"\n                variant=\"outlined\"\n            />\n        </div>\n        <div className='db'>\n            <TextField\n                id=\"content\"\n                label=\"What's on your mind?\"\n                onChange={handleChange}\n                type=\"content\"\n                name=\"contentField\"\n                value={contentField}\n                style={{\n                    margin: 10,\n                    minWidth: '50%'\n                }}\n                margin=\"normal\"\n                variant=\"outlined\"\n                multiline\n            />\n        </div>\n\n        <div className='pa3 dib'>\n            <Button variant='contained' type='reset' onClick={handleReset} color='secondary'>\n                Clear\n            </Button>\n        </div>\n        <div className='pa3 dib'>\n            <Button variant='contained' type='submit' onClick={handleSubmit} color='primary'>\n                Post\n            </Button>\n        </div>\n    </form>\n);\n\nexport default CreatePost;","import React from 'react';\n\nconst PostPreview = ({ title, content, author, date }) => (\n    <article className=\"pv4 bb b--black-10 ph3 ph0-l\">\n        <div className=\"flex flex-column flex-row-ns\">\n            <div className=\"tl\">\n                <h1 className=\"f3 athelas mt0 lh-title\">\n                    {title}\n                </h1>\n                <p className=\"f5 f4-l lh-copy athelas\">\n                    {content}\n                </p>\n            </div>\n        </div>\n        <p className=\"tl f6 lh-copy gray mv2\">By <span className='fw7'>{author}</span></p>\n        <time className=\"tl f6 db gray\">{date}</time>\n    </article>\n);\n\nexport default PostPreview;\n","import React, { Component } from 'react';\nimport './App.css';\n\nimport Header from './components/Header';\nimport { auth, createNewUser } from './firebase/Firebase';\nimport CreatePost from './components/CreatePost';\nimport PostPreview from './components/PostPreview';\nimport uuidv1 from 'uuid/v1';\nimport { firestore } from './firebase/Firebase';\n\nclass App extends Component {\n\n    unsubscribeFromAuth = null;\n    unsubscribeFromSnapshot = null;\n\n    initialState = {\n        currentUser: null,\n        titleField: '',\n        contentField: '',\n        posts: []\n    }\n\n\n\n    constructor(props) {\n        super(props);\n        this.state = this.initialState;\n    }\n\n    handleChange = event => {\n        const { name, value } = event.target;\n        this.setState({ [name]: value })\n    };\n\n    handleSubmit = () => {\n        const { titleField, contentField, currentUser, posts } = this.state;\n\n        if (!titleField.trim() || !contentField.trim()) {\n            alert('Title or content cannot be empty!');\n        } else {\n\n            const newPost = {\n                key: uuidv1(),\n                title: titleField,\n                content: contentField,\n                author: currentUser.displayName,\n                date: new Date().toString().split(':').slice(0, 2).toString().replace(',', ':')\n            };\n\n            const newArr = posts.concat(newPost);\n    \n            this.handleReset();\n\n            firestore.doc(`posts/${100000000 - newArr.length}`).set(newPost);\n        }\n    }\n\n    handleReset = () => {\n        this.setState({\n            titleField: '',\n            contentField: ''\n        });\n    }\n\n\n    componentDidMount() {\n        this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n            if (userAuth) {\n                const userRef = await createNewUser(userAuth);\n\n                userRef.onSnapshot(snapshot => {\n                    this.setState({ currentUser: {\n                        id: snapshot.id,\n                        ...snapshot.data()\n                    }});\n                })\n            } else {\n                this.setState({ currentUser: null });\n            }\n        });\n\n        const postRef = firestore.collection('posts');\n        this.unsubscribeFromSnapshot = postRef.onSnapshot(snapshot => {\n            const allPosts = snapshot.docs.map(doc => doc.data());\n            this.setState({ posts: allPosts });\n        });\n    }\n\n    componentWillUnmount() {\n        this.unsubscribeFromAuth();\n        this.unsubscribeFromSnapshot();\n    }\n\n\n    render() {\n        const { titleField, contentField, currentUser, posts } = this.state;\n\n        return (\n            <div className=\"App\">\n                <Header user={this.state.currentUser} />\n                {currentUser ? <CreatePost handleChange={this.handleChange} handleSubmit={this.handleSubmit} handleReset={this.handleReset} titleField={titleField} contentField={contentField} /> : null}\n                <section className=\"mw7 center\">\n                    <h1 className=\"athelas ph3 ph0-l\">News Feed</h1>\n                    {posts.length ? posts.map(post => (<PostPreview {...post} />)) : <h2>No posts yet!</h2>}\n                </section>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'tachyons';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// // cron code\n// const cron = require(\"node-cron\");\n// const nodeMailer = require(\"nodemailer\");\n\n// let testAccount = nodemailer.createTestAccount();\n\n\n// let transporter = nodeMailer.createTransport({\n//     host: 'gmail',\n//     auth: {\n//     user: 'blogpost.mig688.jl59683@gmail.com',\n//     pass: 'm@ster21'\n//     }\n// });\n\n// // send email on 17th hour CST\n// cron.schedule(\"0 17 * * *\", function () {\n//     if(hasUpdated){\n//         hasUpdated = false;\n//         for(i = 0; i < users.length; i++){\n//             if(users[i].subscribed){\n//                 const mailOptions = {\n//                     from: 'blogpost.mig688.jl59683@gmail.com', // sender address\n//                     to: users[i].email,// list of receivers\n//                     subject: 'Daily Blogpost Update', // Subject line\n//                     text: '',// plain text body\n//                     html: ''// html body\n//                 };\n    \n//                 transporter.sendMail(mailOptions, function (error, info) {\n//                     console.log(info.messageId);\n//                     if (err) {\n//                         console.log(err);\n//                     }\n//                 });\n//             }\n//         }\n//     }\n// }, null, true, 'America/Chicago');\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}