(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{101:function(e,t,a){},108:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),s=(a(99),a(18)),i=a.n(s),o=a(37),u=a(32),m=a(10),p=a(24),d=a(16),h=a(28),b=a(29),f=a(31),g=(a(101),a(42)),v=a.n(g);a(102),a(106);v.a.initializeApp({apiKey:"AIzaSyBrPgbxv1stBqx1zRgN2ADj1z-gEHzcC20",authDomain:"blog-app-31a3a.firebaseapp.com",databaseURL:"https://blog-app-31a3a.firebaseio.com",projectId:"blog-app-31a3a",storageBucket:"blog-app-31a3a.appspot.com",messagingSenderId:"272701057774",appId:"1:272701057774:web:906d1fb811b9c9982a61ff",measurementId:"G-WJWQC7ZDJY"});var E=v.a.auth(),k=v.a.firestore(),y=new v.a.auth.GoogleAuthProvider;y.setCustomParameters({prompt:"select_account"});var w=function(){var e=Object(u.a)(i.a.mark((function e(t,a){var n,r,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=k.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,l=t.email,c=t.photoURL,s=new Date,e.prev=9,e.next=12,n.set(Object(o.a)({displayName:r,email:l,createdAt:s,photoURL:c,isSubscribed:!1},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("Error creating user.",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){return E.signInWithPopup(y)},x=(v.a,a(13)),O=a(160),j=a(68),S=a.n(j),C=(a(108),function(e){var t=e.user;return r.a.createElement("nav",{className:"flex justify-between bb b--white-10 bg-dark-gray"},r.a.createElement("div",{className:"link white-70 hover-white no-underline flex items-center pa3"},r.a.createElement(x.b,{to:"".concat("/blog-app","/")},r.a.createElement(S.a,{className:"dib home-icon",style:{fill:"white"}}))),r.a.createElement("div",{className:"flex-grow pa3 flex items-center"},r.a.createElement("div",{className:"f6 link dib white dim mr3 mr4-ns pointer"},t?r.a.createElement(x.b,{to:"".concat("/blog-app","/"),style:{textDecoration:"none",color:"white"}},r.a.createElement("div",{onClick:function(){return E.signOut()}},"Sign Out")):r.a.createElement("div",{onClick:N},"Sign In")),t?r.a.createElement(x.b,{to:"".concat("/blog-app","/profile/").concat(t?t.id:""),style:{textDecoration:"none",color:"white"}},r.a.createElement("div",{className:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer"},"Hi, ",t.displayName)):r.a.createElement(O.a,{arrow:!0,title:r.a.createElement("span",{style:{fontSize:"12px"}},"Create a Google Account"),"aria-label":"signup"},r.a.createElement("a",{className:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-20 pointer",href:"https://accounts.google.com/signup/v2/webcreateaccount?continue=https%3A%2F%2Faccounts.google.com%2FManageAccount&dsh=S470069364%3A1581635333339519&gmb=exp&biz=false&flowName=GlifWebSignIn&flowEntry=SignUp",target:"_blank",rel:"noopener noreferrer"},"Sign Up"))))}),D=a(73),P=a.n(D),U=a(153),F=a(72),A=a.n(F),L=a(71),I=a.n(L),_=a(2),z=a(4),W=a(159),B=a(152),R=a(154),M=a(70),T=a.n(M),J=a(118),G=a(51),H=a.n(G),Y=(a(66),Object(z.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.classes,a=e.onClose,n=Object(_.a)(e,["classes","onClose"]);return r.a.createElement(B.a,Object.assign({disableTypography:!0,className:t.root},n),r.a.createElement(J.a,{variant:"h6"},"Likes"),a?r.a.createElement(U.a,{"aria-label":"close",className:t.closeButton,onClick:a},r.a.createElement(T.a,null)):null)}))),q=Object(z.a)((function(e){return{root:{padding:e.spacing(2)}}}))(R.a),K=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1,likes:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.postID,a=k.doc("posts/".concat(t));this.unsubscribeFromSnapshot=a.onSnapshot((function(t){if(t.exists){var a=Object.values(t.data().likes);e.setState({likes:a})}else e.setState({likes:[]})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.likes;return r.a.createElement("div",null,r.a.createElement(W.a,{fullWidth:!0,maxWidth:"sm",onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:a},r.a.createElement(Y,{id:"customized-dialog-title",onClose:this.handleClose}),r.a.createElement(q,{dividers:!0},n.map((function(t){return r.a.createElement("div",{key:H()()},r.a.createElement("img",{src:t?t.photoURL:"",className:"br-100 h2 w2 dib v-mid mr2 mv2",alt:"profile pic"}),r.a.createElement(x.b,{onClick:e.handleClose,to:"".concat("/blog-app","/profile/").concat(t?t.id:""),style:{textDecoration:"none",color:"black"}},r.a.createElement("span",{className:"fw7 pointer profile-link v-mid"},t?t.displayName:"")))})))))}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).openDialog=function(){a.refs.dialog.handleClickOpen()},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.title,n=e.content,l=e.author,c=e.date,s=e.handleLike,i=e.currentUser,o=e.likes,u=e.handleDelete;return r.a.createElement("article",{className:"pv3 bb b--black-10 ph3 ph0-l"},r.a.createElement(K,{postID:t,ref:"dialog"}),r.a.createElement("div",{className:"flex flex-column flex-row-ns"},r.a.createElement("div",{className:"tl w-100"},r.a.createElement("div",{className:"flex justify-between"},r.a.createElement("h1",{className:"f3 athelas mt0 lh-title"},a),r.a.createElement("div",{className:"flex"},i&&l&&i.id===l.id?r.a.createElement(U.a,{onClick:function(){return u(t)}},r.a.createElement(I.a,null)):null)),r.a.createElement("p",{className:"f5 f4-l lh-copy athelas"},n))),r.a.createElement("p",{className:"tl f6 lh-copy gray mv2"},"By",r.a.createElement(x.b,{to:"".concat("/blog-app","/profile/").concat(l?l.id:""),style:{textDecoration:"none",color:"black"}},r.a.createElement("span",{className:"fw7 pointer profile-link"}," ",l.displayName))),r.a.createElement("time",{className:"tl f6 db gray"},c.split(":").slice(0,2).toString().replace(",",":")),r.a.createElement("div",{className:"tl mt3"},o[i?i.id:""]?r.a.createElement(A.a,{className:"v-mid pointer ".concat(o[i?i.id:""]?"heart":""),style:{color:"#ed4956"},onClick:function(){return s(!1,t)}}):r.a.createElement(P.a,{className:"v-mid pointer",onClick:function(){return s(!0,t)}}),"\u2022 ",r.a.createElement("span",{onClick:Object.keys(o).length?this.openDialog:null,className:"v-mid ".concat(Object.keys(o).length?"fw7 pointer profile-link":"")},"".concat(Object.keys(o).length," Like").concat(1===Object.keys(o).length?"":"s"))))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).getUser=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match,e.next=3,k.doc("users/".concat(t.params.userID)).get();case 3:n=e.sent,r=n.data(),a.setState({displayedUser:r});case 6:case"end":return e.stop()}}),e)}))),a.state={displayedUser:null,userPosts:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getUser();var t=this.props.match,a=k.collection("posts");this.unsubscribeFromSnapshot=a.onSnapshot((function(a){var n=a.docs.map((function(e){return e.data()})).filter((function(e){return e.author.id===t.params.userID}));e.setState({userPosts:n})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromSnapshot()}},{key:"render",value:function(){var e=this.state,t=e.displayedUser,a=e.userPosts,n=this.props,l=n.currentUser,c=n.handleLike,s=n.handleDelete;return r.a.createElement("div",null,r.a.createElement("article",{className:"mw6 center bg-white br3 pa3 pa4-ns mv3 ba b--black-10"},r.a.createElement("div",{className:"tc"},r.a.createElement("img",{src:t?t.photoURL:"",className:"br-100 h4 w4 dib ba b--black-05 pa2",alt:"profile pic"}),r.a.createElement("h1",{className:"f3 mb2"},t?t.displayName:""),r.a.createElement("h2",{className:"f5 fw4 gray mt0"},"Contact:",r.a.createElement("a",{style:{textDecoration:"none",color:"#777"},href:"mailto:".concat(t?t.email:""),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:"fw7"}," ",t?t.email:""))))),r.a.createElement("section",{className:"mw7 center"},r.a.createElement("h1",{className:"athelas ph3 ph0-l"},"".concat(t?t.displayName:"","'s Posts")),a.length?a.map((function(e){return r.a.createElement(Q,Object.assign({},e,{currentUser:l,handleLike:c,handleDelete:s}))})):r.a.createElement("h3",{className:"fw4"},"No posts yet!")))}}]),t}(n.Component),X=a(156),Z=a(157),$=function(e){var t=e.handleChange,a=e.handleSubmit,n=e.handleReset,l=e.titleField,c=e.contentField,s=e.currentUser;return r.a.createElement("div",null,r.a.createElement("h1",null,"Create a New Post"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement("div",{className:"db mt4"},r.a.createElement(Z.a,{id:"title",label:"Enter a Title",onChange:t,type:"title",name:"titleField",value:l,style:{margin:10,minWidth:"50%"},margin:"dense",variant:"outlined"})),r.a.createElement("div",{className:"db"},r.a.createElement(Z.a,{id:"content",label:"What's on your mind?",onChange:t,type:"content",name:"contentField",value:c,style:{margin:10,minWidth:"50%"},margin:"normal",variant:"outlined",multiline:!0})),r.a.createElement("div",{className:"pa3 dib"},r.a.createElement(x.b,{to:"".concat("/blog-app","/"),style:{textDecoration:"none"}},r.a.createElement(X.a,{variant:"contained",type:"reset",onClick:n},"Cancel"))),r.a.createElement("div",{className:"pa3 dib"},r.a.createElement(X.a,{variant:"contained",type:"reset",onClick:n,color:"secondary"},"Clear")),r.a.createElement("div",{className:"pa3 dib"},s?r.a.createElement(x.b,{to:"".concat("/blog-app","/").concat(l.trim()&&c.trim()?"":"newpost"),style:{textDecoration:"none"}},r.a.createElement(X.a,{variant:"contained",type:"submit",onClick:a,color:"primary"},"Post")):r.a.createElement(X.a,{variant:"contained",type:"submit",onClick:a,color:"primary",disabled:!0},"Post"))))},ee=a(78),te=a.n(ee),ae=a(77),ne=a.n(ae),re=a(74),le=a.n(re),ce=a(76),se=a.n(ce),ie=a(75),oe=a.n(ie),ue=a(36),me=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).unsubscribeFromAuth=null,a.unsubscribeFromSnapshot=null,a.initialState={currentUser:null,titleField:"",contentField:"",posts:[],currentPage:1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(m.a)({},n,r))},a.handleSubmit=function(){var e=a.state,t=e.titleField,n=e.contentField,r=e.currentUser;if(t.trim()&&n.trim()){var l=new Date,c=1e13-l.getTime(),s={id:c,key:H()(),title:t,content:n,author:r,date:l.toString(),likes:{}};a.handleReset(),k.doc("posts/".concat(c)).set(s)}else alert("Title or content cannot be empty!")},a.handleDelete=function(e){k.doc("posts/".concat(e)).delete()},a.handleReset=function(){a.setState({titleField:"",contentField:""})},a.handlePageForward=function(){a.setState((function(e){return{currentPage:e.currentPage+1}}))},a.handlePageBackward=function(){a.setState((function(e){return{currentPage:e.currentPage-1}}))},a.handleSubscription=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.doc("users/".concat(a.state.currentUser.id)),e.next=3,n.get();case 3:return r=e.sent,l=r.data(),e.prev=5,e.next=8,n.set(Object(o.a)({},l,{isSubscribed:t}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log("Error handling subscription.",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),a.handleLike=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,l,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.state.currentUser){e.next=4;break}return alert("Please sign in to like this post."),e.abrupt("return");case 4:return l=k.doc("posts/".concat(n)),e.next=7,l.get();case 7:if(c=e.sent,s=c.data(),e.prev=9,!t){e.next=16;break}return u=Object(o.a)({},s.likes,Object(m.a)({},r.id,r)),e.next=14,l.set(Object(o.a)({},s,{likes:u}));case 14:e.next=19;break;case 16:return delete s.likes[r.id],e.next=19,l.set(Object(o.a)({},s,{likes:s.likes}));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),console.log("Error handling like.",e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t,a){return e.apply(this,arguments)}}(),a.state=a.initialState,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromAuth=E.onAuthStateChanged(function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,w(a);case 3:t.sent.onSnapshot((function(t){e.setState({currentUser:Object(o.a)({id:t.id},t.data())})})),t.next=8;break;case 7:e.setState({currentUser:null});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var t=k.collection("posts");this.unsubscribeFromSnapshot=t.onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()}));e.setState({posts:a}),e.state.currentPage>1&&e.state.currentPage>Math.ceil(a.length/5)&&e.setState({currentPage:Math.ceil(a.length/5)})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth(),this.unsubscribeFromSnapshot()}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentUser,n=t.posts,l=t.currentPage;return r.a.createElement("div",{className:"App"},r.a.createElement(C,{user:a}),r.a.createElement(ue.c,null,r.a.createElement(ue.a,{exact:!0,path:"".concat("/blog-app","/")},r.a.createElement("section",{className:"mw7 center"},r.a.createElement("h1",{className:"athelas ph3 ph0-l"},"News Feed"),a?r.a.createElement("div",null,r.a.createElement("div",{className:"mh3 dib"},r.a.createElement(x.b,{to:"".concat("/blog-app","/newpost"),style:{textDecoration:"none"}},r.a.createElement(X.a,{variant:"contained",style:{backgroundColor:"#1777f2",color:"white"}},r.a.createElement(le.a,null),r.a.createElement("span",null,"New Post")))),a.isSubscribed?r.a.createElement("div",{className:"mh3 dib"},r.a.createElement(X.a,{variant:"contained",onClick:function(){return e.handleSubscription(!1)}},r.a.createElement(oe.a,null),r.a.createElement("span",null,"Unsubscribe"))):r.a.createElement("div",{className:"mh3 dib"},r.a.createElement(X.a,{variant:"contained",onClick:function(){return e.handleSubscription(!0)},style:{backgroundColor:"#f90300",color:"white"}},r.a.createElement(se.a,null),r.a.createElement("span",null,"Subscribe")))):null,n.length?r.a.createElement("div",null,n.slice(5*(l-1),5*l).map((function(t){return r.a.createElement(Q,Object.assign({},t,{currentUser:a,handleLike:e.handleLike,handleDelete:e.handleDelete}))})),r.a.createElement("div",{className:"ma4"},r.a.createElement(X.a,{onClick:this.handlePageBackward,variant:"contained",disabled:1===l},r.a.createElement(ne.a,null)),r.a.createElement("span",{className:"mh3"},"Page ".concat(l," of ").concat(Math.ceil(n.length/5))),r.a.createElement(X.a,{onClick:this.handlePageForward,variant:"contained",disabled:l===Math.ceil(n.length/5)},r.a.createElement(te.a,null))),r.a.createElement("div",{className:"ma3"},r.a.createElement(x.b,{to:"".concat("/blog-app","/all"),style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{textTransform:"none"},variant:"outlined"},"View All Posts")))):r.a.createElement("h3",{className:"fw4"},"No posts yet!"))),r.a.createElement(ue.a,{path:"".concat("/blog-app","/newpost")},r.a.createElement($,Object.assign({handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleReset:this.handleReset},this.state))),r.a.createElement(ue.a,{path:"".concat("/blog-app","/all")},r.a.createElement("section",{className:"mw7 center"},r.a.createElement("h1",{className:"athelas ph3 ph0-l"},"All Posts"),n.length?r.a.createElement("div",null,n.map((function(t){return r.a.createElement(Q,Object.assign({},t,{currentUser:a,handleLike:e.handleLike,handleDelete:e.handleDelete}))})),r.a.createElement("div",{className:"ma3"},r.a.createElement(x.b,{to:"".concat("/blog-app","/"),style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{textTransform:"none"},variant:"outlined"},"Back to News Feed")))):r.a.createElement("h3",{className:"fw4"},"No posts yet!"))),r.a.createElement(ue.a,{path:"".concat("/blog-app","/profile/:userID"),render:function(t){return r.a.createElement(V,Object.assign({},t,{currentUser:a,handleLike:e.handleLike,handleDelete:e.handleDelete}))}})),r.a.createElement("img",{src:"https://img.pngio.com/university-texas-longhorn-clipart-free-85063-png-images-pngio-university-of-texas-longhorns-png-320_161.png",className:"h2 w3 ma2",alt:"longhorn"}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(79),de=a.n(pe),he=a(80);a(116);c.a.render(r.a.createElement(x.a,null,r.a.createElement(de.a,{style:{position:"fixed",zIndex:-1},className:"particles",params:he}),r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,t,a){},80:function(e){e.exports=JSON.parse('{"particles":{"number":{"value":30,"density":{"enable":true,"value_area":2000}},"color":{"value":"#dc4b4b"},"shape":{"type":"circle","stroke":{"width":0,"color":"#000000"},"polygon":{"nb_sides":5},"image":{"src":"img/github.svg","width":100,"height":100}},"opacity":{"value":0.5,"random":false,"anim":{"enable":false,"speed":1,"opacity_min":0.1,"sync":false}},"size":{"value":10,"random":true,"anim":{"enable":false,"speed":40,"size_min":0.1,"sync":false}},"line_linked":{"enable":false,"distance":150,"color":"#ffffff","opacity":0.4,"width":1},"move":{"enable":true,"speed":6,"direction":"top","random":false,"straight":false,"out_mode":"out","bounce":false,"attract":{"enable":false,"rotateX":600,"rotateY":1200}}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":false,"mode":"repulse"},"onclick":{"enable":true,"mode":"push"},"resize":true},"modes":{"grab":{"distance":400,"line_linked":{"opacity":1}},"bubble":{"distance":400,"size":40,"duration":2,"opacity":8,"speed":3},"repulse":{"distance":200,"duration":0.4},"push":{"particles_nb":4},"remove":{"particles_nb":2}}},"retina_detect":true}')},94:function(e,t,a){e.exports=a(117)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.08c8b98a.chunk.js.map